---
### https://docs.docker.com/compose/compose-file/

# Don't forget to update the volume mount paths to contain the actual user homedir who will run the containers

volumes:
  postgres-data:

services:

  zabbix-server:
    image: docker.io/zabbix/zabbix-server-pgsql:alpine-7.4-latest
    ports:
      - 10051:10051
    environment:
      - TZ=Europe/Budapest
      - LANG=en_US.utf8
      - DB_SERVER_HOST=postgres
      - DB_SERVER_PORT=5432
      - POSTGRES_DB=zabbix
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=dummy
      - ZBX_STARTREPORTWRITERS=1
      - ZBX_WEBSERVICEURL=http://zabbix-web-service:10053/report
      - ZBX_DEBUGLEVEL=3
    restart: unless-stopped
    volumes:
      - /home/admin/container-projects/zabbix/200-zabbix-server/ssh-keys:/var/lib/zabbix/ssh_keys:z,ro
    depends_on:
      - postgres
   

  postgres:
    image: docker.io/library/postgres:17-bullseye
    environment:
      - TZ=Europe/Budapest
      - LANG=en_US.utf8
      - PGDATA=/var/lib/postgresql/data
      - POSTGRES_PASSWORD=dummy
    restart: unless-stopped
    volumes:
      - postgres-data:/var/lib/postgresql/data
